{
on_process: "if(level.player and object.vars.scheme_loaded != level.player.control_scheme,
			[
			set(object.vars.buttons, control_scheme_node.button
				where control_scheme_node = find(get_document('data/control_schemes.cfg').control_scheme, value.id = level.player.control_scheme)),
			set(object.vars.scheme_loaded, level.player.control_scheme)
			])",
on_draw: "if(IPHONE_SYSTEM and level.player,
			if((not level.player.underwater_controls),
				[
				map(['up', 'down', 'left', 'right'], 'i',
					if(b and b.anim,
						if(query(level.player, 'ctrl_'+i),
						[color(255, 255, 255, 255), draw_animation(b.anim_down, b.x, b.y)],
						[color(255, 255, 255, 96), draw_animation(b.anim, b.x, b.y)])
					)
					where b = find(object.vars.buttons, 'button', button['id'] = i)
				),

			    [
					if(level.player.ctrl_tongue and (not level.player.ctrl_up or level.player.ctrl_down), color(255, 255, 255, 255), color(255, 255, 255, 96)),
					if(b.anim, draw_animation(if(level.player.ctrl_tongue and (not level.player.ctrl_up or level.player.ctrl_down),b.anim_down,b.anim), b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'attack'),

					if(level.player.ctrl_tongue and level.player.ctrl_up, color(255, 255, 255, 255), color(255, 255, 255, 96)),
					if(b.anim, draw_animation(if(level.player.ctrl_tongue and level.player.ctrl_up,b.anim_down,b.anim), b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'attack_up'),

					if(level.player.ctrl_tongue and level.player.ctrl_down, color(255, 255, 255, 255), color(255, 255, 255, 96)),
					if(b.anim, draw_animation(if(level.player.ctrl_tongue and level.player.ctrl_down,b.anim_down,b.anim), b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'attack_down'),


					if(level.player.ctrl_jump, color(255, 255, 255, 255), color(255, 255, 255, 96)),
					if(b.anim, draw_animation(if(level.player.ctrl_jump,b.anim_down,b.anim), b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'jump'),

				]
				where b = find(object.vars.buttons, 'button', button['id'] = 'b')
				where a = find(object.vars.buttons, 'button', button['id'] = 'a'),


				if(level.player.ctrl_attack, color(255, 255, 255, 255), color(255, 255, 255, 96)),
				if(b.anim, draw_animation(if(level.player.ctrl_attack,b.anim_down,b.anim), b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'toggle'),

				color(255, 255, 255, 255),
				if(level.player.can_interact and b.anim, draw_animation(if(level.player.ctrl_up,b.anim_down,b.anim), b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'interact'),

				if(level.player.is_standing_on_platform and b.anim, draw_animation(if(level.player.ctrl_down,b.anim_down,b.anim), b.x, b.y))
					where b = find(object.vars.buttons, 'button', button['id'] = 'jump_down'),
				],

				#controls when underwater#
				[
					[
						if(level.player.ctrl_tongue, color(255, 255, 255, 255), color(255, 255, 255, 96)),
						if(a and b and a.anim, draw_animation(a.anim, if(level.player.ctrl_reverse_ab, b, a).x, if(level.player.ctrl_reverse_ab, b, a).y)),
					]
					where b = find(object.vars.buttons, 'button', button['id'] = 'b')
					where a = find(object.vars.buttons, 'button', button['id'] = 'a'),
					color(255, 255, 255, 255)
				]
			))",
animation: [
	{
		id: "iphone_jump_circle",
		image: "gui/iphone_controls4.png",
		rect: [208,0,303,95],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_jump_circle_pressed",
		image: "gui/iphone_controls4.png",
		rect: [208,96,303,191],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_attack_square",
		image: "gui/iphone_controls4.png",
		rect: [304,0,399,95],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_attack_square_pressed",
		image: "gui/iphone_controls4.png",
		rect: [304,96,399,191],
		frames: 1,
		duration: 1,
		scale: 2,
	},

	{
		id: "iphone_attack_arrow_up",
		image: "gui/iphone_controls4.png",
		rect: [400,0,495,63],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_attack_arrow_up_pressed",
		image: "gui/iphone_controls4.png",
		rect: [400,64,495,127],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_attack_arrow_down",
		image: "gui/iphone_controls4.png",
		rect: [400,128,495,191],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_attack_arrow_down_pressed",
		image: "gui/iphone_controls4.png",
		rect: [400,192,495,255],
		frames: 1,
		duration: 1,
		scale: 2,
	},


	{
		id: "ipad_ability_toggle",
		image: "gui/iphone_controls4.png",
		rect: [0,224,63,287],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "ipad_ability_toggle_pressed",
		image: "gui/iphone_controls4.png",
		rect: [64,224,127,287],
		frames: 1,
		duration: 1,
		scale: 2,
	},

	{
		id: "iphone_action_star",
		image: "gui/iphone_controls5.png",
		rect: [0,0,95,95],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_action_star_pressed",
		image: "gui/iphone_controls5.png",
		rect: [96,0,191,95],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_jumpdown_semicircle",
		image: "gui/iphone_controls4.png",
		rect: [208,192,303,255],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_jumpdown_semicircle_pressed",
		image: "gui/iphone_controls4.png",
		rect: [304,192,399,255],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "ipad_b_circle",
		image: "gui/ipad_buttons.png",
		rect: [70,0,139,69],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_a_circle",
		image: "gui/ipad_buttons.png",
		rect: [0,0,69,69],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_b_down_circle",
		image: "gui/ipad_buttons_pressed.png",
		rect: [70,0,139,69],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_a_down_circle",
		image: "gui/ipad_buttons_pressed.png",
		rect: [0,0,69,69],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_action_circle",
		image: "gui/ipad_buttons.png",
		rect: [70,70,139,139],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_jumpdown_circle",
		image: "gui/ipad_buttons.png",
		rect: [0,70,69,139],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_spin_circle",
		image: "gui/ipad_buttons.png",
		rect: [0,140,69,209],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "iphone_b",
		image: "gui/iphone_controls.png",
		rect: [2,2,52,60],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_a",
		image: "gui/iphone_controls.png",
		rect: [2,62,52,120],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_b_down",
		image: "gui/iphone_controls.png",
		rect: [54,2,104,60],
		frames: 1,
		duration: 1,
		scale: 3,
	},
	{
		id: "iphone_a_down",
		image: "gui/iphone_controls.png",
		rect: [54,62,104,120],
		frames: 1,
		duration: 1,
		scale: 3,
	},
	{
		id: "iphone_action",
		image: "gui/iphone_controls.png",
		rect: [2,122,52,180],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_action_down",
		image: "gui/iphone_controls.png",
		rect: [54,122,104,180],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_up",
		image: "gui/iphone_controls3.png",
		rect: [78,0,124,54],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_up_pressed",
		image: "gui/iphone_controls3.png",
		rect: [78,96,124,150],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_down",
		image: "gui/iphone_controls3.png",
		rect: [126,44,172,74],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_down_pressed",
		image: "gui/iphone_controls3.png",
		rect: [126,140,172,170],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_left",
		image: "gui/iphone_controls4.png",
		rect: [0,0,79,111],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_left_pressed",
		image: "gui/iphone_controls4.png",
		rect: [0,112,79,223],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_right",
		image: "gui/iphone_controls4.png",
		rect: [80,0,159,111],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "iphone_right_pressed",
		image: "gui/iphone_controls4.png",
		rect: [80,112,159,223],
		frames: 1,
		duration: 1,
		scale: 2,
	},
	{
		id: "ipad_b",
		image: "gui/iphone_controls.png",
		rect: [2,2,52,60],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_a",
		image: "gui/iphone_controls.png",
		rect: [2,62,52,120],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_b_down",
		image: "gui/iphone_controls.png",
		rect: [54,2,104,60],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_a_down",
		image: "gui/iphone_controls.png",
		rect: [54,62,104,120],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_action",
		image: "gui/iphone_controls.png",
		rect: [2,122,52,180],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_action_down",
		image: "gui/iphone_controls.png",
		rect: [54,122,104,180],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_up",
		image: "gui/iphone_controls3.png",
		rect: [78,0,124,54],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_up_pressed",
		image: "gui/iphone_controls3.png",
		rect: [78,96,124,150],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_down",
		image: "gui/iphone_controls3.png",
		rect: [126,44,172,74],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_down_pressed",
		image: "gui/iphone_controls3.png",
		rect: [126,140,172,170],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_left",
		image: "gui/ipad_controls.png",
		rect: [0,0,95,143],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_left_pressed",
		image: "gui/ipad_controls.png",
		rect: [0,144,95,287],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_right",
		image: "gui/ipad_controls.png",
		rect: [96,0,191,143],
		frames: 1,
		duration: 1,
		scale: 1,
	},
	{
		id: "ipad_right_pressed",
		image: "gui/ipad_controls.png",
		rect: [96,144,191,287],
		frames: 1,
		duration: 1,
		scale: 1,
	},
    
    #android controls start#
	{
		id: "android_left",
		image: "gui/iphone_controls4.png",
		rect: [0,0,79,111],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_left_pressed",
		image: "gui/iphone_controls4.png",
		rect: [0,112,79,223],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_right",
		image: "gui/iphone_controls4.png",
		rect: [80,0,159,111],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_right_pressed",
		image: "gui/iphone_controls4.png",
		rect: [80,112,159,223],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_b_circle",
		image: "gui/iphone_buttons.png",
		rect: [58,0,115,57],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_a_circle",
		image: "gui/iphone_buttons.png",
		rect: [0,0,57,57],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_b_down_circle",
		image: "gui/iphone_buttons_pressed.png",
		rect: [58,0,115,57],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_a_down_circle",
		image: "gui/iphone_buttons_pressed.png",
		rect: [0,0,57,57],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_action_circle",
		image: "gui/iphone_buttons.png",
		rect: [58,58,115,115],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_action_down_circle",
		image: "gui/iphone_buttons_pressed.png",
		rect: [58,58,115,115],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_jumpdown_circle",
		image: "gui/iphone_buttons.png",
		rect: [0,58,57,115],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
	{
		id: "android_jumpdown_down_circle",
		image: "gui/iphone_buttons_pressed.png",
		rect: [0,58,57,115],
		frames: 1,
		duration: 1,
		scale: "@eval min( SCREEN_WIDTH * 0.23 / 79, SCREEN_HEIGHT * 0.4 / 111 )", 
	},
    #android controls end#
],
}
