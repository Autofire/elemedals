# Shankle
# Invincible Goomba-clone
# TODO: (This only includes things which may not be obvious)

{
#GLOBAL VALUES#

id: "shankle",
editor_info: { category: "Hazards" },
solid_dimensions: ["common","enemy"],
hitpoints: 200,
max_hitpoints: 200,
traction: 500,
friction: 50,

properties: {
	team: "'evil'",
	attack_damage: 1,
	gst: 2,	# Global Stand Time; number of times the stand animation plays
	
	distance_to_cliff_check: "max(30, velocity_x/7)",
	should_turn_away_from_cliff: "(distance_to_cliff < distance_to_cliff_check)",
	turn_around_check: "def() if((should_turn_away_from_cliff), [animation('stand'), set(facing, -facing), set(standtime, gst), set(velocity_x,0)])",
},

#ANIMATION HANDLES#
on_process: "turn_around_check()",
on_collide_side: "[animation('stand'), set(facing, -facing), set(standtime,gst), set(velocity_x,0)]",
on_end_stand_anim: "[set(standtime, standtime - 1), if(standtime = 0, animation('walk'),animation('stand'))]",
on_end_walk_anim: "animation('walk')",

#ANIMATIONS#
animation: [
	{
		frames_per_row: 1,

		id: "walk",
		body_area: "all",
		image: "hazard/shankle.png",
		rect: [3,2,38,15],
		solid_area: [5,3,30,12],
		pad: 3,
		frames: 4,
		reverse: true,
		duration: 2,
		accel_x: 0,
		accel_y: 100,
		velocity_x: 250,
		attack_area: [1,1,34,13]
	},
	
	{
		frames_per_row: 1,

		id: "stand",
		body_area: "all",
		image: "hazard/shankle.png",
		rect: [3,2,38,15],
		solid_area: [5,3,30,12],
		pad: 3,
		frames: 4,
		duration: 4,
		accel_x: 0,
		accel_y: 100,
		attack_area: [1,1,34,13]
	},
]
}
